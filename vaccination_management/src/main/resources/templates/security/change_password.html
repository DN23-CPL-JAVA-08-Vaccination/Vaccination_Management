<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Đổi mật khẩu</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css"/>
    <link rel="stylesheet" th:href="@{css/style-thangLv.css}" type="text/css">

    <script src=" http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/2.0.1/css/toastr.css" rel="stylesheet"/>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/2.0.1/js/toastr.js"></script>

</head>

<body>

<div class="container-change-pass">

    <main class="card">

        <section class="esquerda">
            <h2 class="title">Đổi mật khẩu</h2>
            <form class="row g-3" th:object="${accountDTO}" th:action="@{/change-password}" method="post">
                <section class="caixa__input">
                    <label for="currentPassword">Mật khẩu hiện tại</label>
                    <div class="input-group mb-3">
                        <input th:field="*{currentPassword}" type="password" class="form-control"
                               id="currentPasswordInput" name="password"
                               placeholder="Nhấn vào để nhập" th:value="${accountDTO.currentPassword}">
                        <span class="input-group-text"><i class="far fa-eye-slash" id="currentPassword"></i></span>
                    </div>
                    <span style="color: red" th:if="${#fields.hasErrors('currentPassword')}" th:errors="*{currentPassword}"></span>

                    <!--                    <p style="color: #ff0033">Mật khẩu hiện tại không được trống</p>-->
                    <!--                    <p style="color: #ff0033">Mật khẩu không đúng</p>-->
                </section>
                <section class="caixa__input">
                    <label for="newPassword">Mật khẩu mới</label>
                    <div class="input-group mb-3">
                        <input th:field="*{newPassword}" type="password" class="form-control" id="newPasswordInput"
                               name="password"
                               placeholder="Nhấn vào để nhập" th:value="${accountDTO.newPassword}">
                        <span class="input-group-text"><i class="far fa-eye-slash" id="newPassword"></i></span>
                    </div>
                    <span style="color: red" th:if="${#fields.hasErrors('newPassword')}" th:errors="*{newPassword}"></span>


                    <!--                    <p style="color: #ff0032">Mật khẩu mới không được để trống</p>-->
                    <!--                    <p style="color: #ff0034">Từ 8-15 ký tự, gồm chữ thường, chữ hoa, ký tự đặc biệt</p>-->
                </section>
                <section class="caixa__input">
                    <label for="confirmPassword">Nhập lại mật khẩu</label>
                    <div class="input-group mb-3">
                        <input th:field="*{confirmPassword}" type="password" class="form-control"
                               id="confirmPasswordInput" name="password"
                               placeholder="Nhấn vào để nhập" th:value="${accountDTO.confirmPassword}">
                        <span class="input-group-text"><i class="far fa-eye-slash" id="confirmPassword"></i></span>
                    </div>
                    <span style="color: red" th:if="${#fields.hasErrors('confirmPassword')}" th:errors="*{confirmPassword}"></span>

                    <!--                    <p style="color: #ff0034">Xác nhận lại mật khẩu</p>-->
                    <!--                    <p style="color: #ff0031">Không trùng mật khẩu</p>-->
                </section>
                <section class="controle__acesso">
                    <div class="">
                        <div style="display: flex;justify-content: space-evenly">
                            <div>
                                <a type="button" th:href="@{/infor-account}"
                                   class="btn btn-outline-danger btn-padding-10">Quay lại</a>
                            </div>
                            <div>
                                <button class="btn btn-outline-success btn-padding-10">Xác nhận</button>
                            </div>
                        </div>
                    </div>
                </section>
            </form>

        </section>
        <section class="direita d-flex align-items-center">
            <div class="background__imagem ">
                <img th:src="@{img/logo_vaccination.png}"/>
            </div>
        </section>
    </main>
</div>
<script th:inline="javascript">
    const currentPassword = document.querySelector("#currentPassword");
    const currentPasswordInput = document.querySelector("#currentPasswordInput");
    currentPassword.addEventListener("click", function () {
        const type = currentPasswordInput.getAttribute("type") === "password" ? "text" : "password";
        currentPasswordInput.setAttribute("type", type);
        this.classList.toggle('fa-eye');
        this.classList.toggle('fa-eye-slash')
    });
    const newPassword = document.querySelector("#newPassword");
    const newPasswordInput = document.querySelector("#newPasswordInput");
    newPassword.addEventListener("click", function () {
        const type = newPasswordInput.getAttribute("type") === "password" ? "text" : "password";
        newPasswordInput.setAttribute("type", type);
        this.classList.toggle('fa-eye');
        this.classList.toggle('fa-eye-slash')
    });
    const confirmPassword = document.querySelector("#confirmPassword");
    const confirmPasswordInput = document.querySelector("#confirmPasswordInput");
    confirmPassword.addEventListener("click", function () {
        const type = confirmPasswordInput.getAttribute("type") === "password" ? "text" : "password";
        confirmPasswordInput.setAttribute("type", type);
        this.classList.toggle('fa-eye');
        this.classList.toggle('fa-eye-slash')
    });

    toastr.options = {
        "closeButton": false,
        "debug": false,
        "newestOnTop": false,
        "progressBar": true,
        "positionClass": "toast-top-right",
        "preventDuplicates": false,
        "onclick": null,
        "showDuration": "300",
        "hideDuration": "1000",
        "timeOut": "5000",
        "extendedTimeOut": "1000",
        "showEasing": "swing",
        "hideEasing": "linear",
        "showMethod": "fadeIn",
        "hideMethod": "fadeOut"
    }

    var str = [[${msg}]];

    if (str != null) {
        if (str.includes("Mật khẩu không đúng")) {
            toastr.error(str, "Thông báo");
        }
        if (str.includes("Vui lòng nhập đúng các trường")) {
            toastr.warning(str, "Thông báo");
        }
        if (str.includes("Xoá")) {
            if (str.includes("thành công")) {
                toastr.success(str, "Thông báo");
            } else {
                toastr.error(str, "Thông báo");
            }
        }
    }
</script>
</body>
</html>
